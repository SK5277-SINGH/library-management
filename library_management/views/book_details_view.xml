<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="view_book_details" model="ir.ui.view">
			<field name="name">view.book.details</field>
			<field name="model">product.template</field>
			<field name="inherit_id" ref="product.product_template_only_form_view"/>
			<field name="arch" type="xml">
				<header>
					<button name="state_book_request" type="object" string="Request" 
	                    	class="oe_highlight" attrs="{ 
	                    	'invisible':['|',('state','=','avail'),'|',
	                    					 ('state','=','not_avail'),'|',
	                    					 ('state','=','req'),'|',
	                    					 ('req_book','=',False)]
	                    	}"/>

	                <button name="state_book_avail" type="object" string="Available" 
	                    	class="oe_highlight" attrs="{ 
	                    	'invisible':[
	                    					 ('req_book','=',True),]
	                    	}"/>
					<field name="state"  widget="statusbar"/>
				</header>
<!-- Librarian -->
				<xpath expr="//label[@for='name']" position="before">
					<div groups='library_management.library_group_librarian'>
						<field name="role_librarian"  widget="checkbox"/>
						<label for='Librarian' string='Librarian'/>
					</div>
				</xpath>

<!-- Request Book -->
				<xpath expr="//label[@for='Librarian']" position="after">
					<div>
						<field name="req_book" widget='checkbox' attrs="{'invisible':[('role_librarian', '=' ,False)]}"/>
						<label for='request' string='Request book'/>
					</div>
				</xpath>

<!-- book type -->
				<xpath expr="//field[@name='name']" position="after">
					<div>
						<label for='book_type' string="Book Type:"/>
						<field name="book_type" widget='many2many_tags' 
							   attrs="{'invisible':[('role_librarian', '=' ,False)]}"/>
					</div>
						
				</xpath>

				<xpath expr="//field[@name='type']" position="after">
					<field name="isbn" attrs="{
						'invisible':['|',('role_librarian', '=' ,False),'|',
										('req_book','=',True)],
						'required':[('role_librarian','=',True)]}"/>

					<field name="language" 
						   widget='many2many_tags' 
						   attrs="{
						   			'invisible':[('role_librarian', '=' ,False)] }"/>					
				</xpath>

				<xpath expr="//field[@name='list_price']" position="replace">
					<field name="copies" attrs="{

						'invisible':['|',('role_librarian', '=' ,False),'|',
									            ('req_book','=',True)],

						'required': [('req_book','=',False)]}"/>
				</xpath>

				<xpath expr="//field[@name='copies']" position="after">
					<field name="date" attrs="{'invisible':[('role_librarian', '=' ,False)]}"/>
					<field name="author" attrs="{'invisible':[('role_librarian', '=' ,False)]}"/>
					<field name="publisher" attrs="{'invisible':[('role_librarian', '=' ,False)]}"/>
					<field name="description" attrs="{'invisible':[('role_librarian', '=' ,False)]}"/>

					<field name="book_avail" attrs="{'invisible':['|',('role_librarian', '=' ,False),'|',('req_book','=',True)]}"/>
				</xpath>
				



				<xpath expr="//page[@name='general_information']" position="after">
						<page string="Student" name='student' attrs="{
							'invisible': ['|',('req_book','=',False)],
							}">
							<group>
								<field name="stud_ids" 
									   attrs="{'required': [('req_book','=',True)]}"/>
								<field name="division"
									   attrs="{'required': [('req_book','=',True)]}"  />
								<field name="rno"
									   attrs="{'required': [('req_book','=',True)]}" />
							</group>
						</page>
					</xpath>

				<!-- <xpath expr="//field[@name='value_ids']" position="after">
					<field name="qty"/>
				</xpath> -->

				
			</field>
		</record>

		<menuitem id="menu_book" name="Library" sequence="1"/>
		<!-- <menuitem id="menu_book_menu" name="Book" sequence="2" parent="menu_book"/>
		<menuitem id="menu_book_view" name="Book Details" sequence="3" action="action_book" parent="menu_book_menu"/> -->
	</data>
</odoo>
